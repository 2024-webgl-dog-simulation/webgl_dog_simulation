<html>

<head>
    <link rel="stylesheet" type="text/css" href="motioncapture.css">
</head>

<script id="vertex-shader" type="x-shader/x-vertex">

attribute  vec4 vPosition;            // 정점 위치
attribute  vec3 vNormal;              // 정점 노말
varying vec4 fColor;                  // 최종 색상 (프래그먼트 셰이더로 전달됨)

uniform vec4 ambientProduct, diffuseProduct, specularProduct; // 조명 색상
uniform mat4 modelViewMatrix;         // 모델 뷰 행렬
uniform mat4 projectionMatrix;        // 투영 행렬
uniform vec4 lightPosition;           // 조명 위치
uniform float shininess;              // 광택도
uniform vec4 uColor; // 색상 정보

void main()
{
    vec3 pos = -(modelViewMatrix * vPosition).xyz;  // 정점의 눈 좌표계 위치
    
    vec3 light = lightPosition.xyz;  // 조명 위치

    vec3 L = normalize( light - pos );  // 빛의 방향
    
    vec3 E = normalize( -pos );         // 카메라 방향
    vec3 H = normalize( L + E );        // 반사 벡터
    
    vec4 NN = vec4(vNormal,0);

    // 정점 노말을 눈 좌표계로 변환
    vec3 N = normalize( (modelViewMatrix*NN).xyz);

    // 조명 방정식의 항들을 계산
    vec4 ambient = ambientProduct;

    float Kd = max( dot(L, N), 0.0 );
    vec4  diffuse = Kd * diffuseProduct;

    float Ks = pow( max(dot(N, H), 0.0), shininess ); 
    vec4  specular = Ks * specularProduct;
    
    if( dot(L, N) < 0.0 ) {
        specular = vec4(0.0, 0.0, 0.0, 1.0);
    } 
    
    gl_Position = projectionMatrix * modelViewMatrix * vPosition;

    fColor = uColor * (ambient + diffuse + specular);// 최종 색상
    fColor.a = 1.0;
}
</script>

<!-- 프래그먼트 셰이더 정의 -->
<script id="fragment-shader" type="x-shader/x-fragment">

precision mediump float;

varying  vec4 fColor; // 버텍스 셰이더로부터 전달받은 색상

void main()
{
    gl_FragColor = fColor; // 최종 출력 색상
}
</script>

<!-- 외부 스크립트 파일 로드 -->
<script type="text/javascript" src="./Common/webgl-utils.js"></script>
<script type="text/javascript" src="./Common/initShaders.js"></script>
<script type="text/javascript" src="./Common/MV.js"></script>
<script type="text/javascript" src="./motioncapture.js"></script>

<body>
    <div class="container">
        <!-- 캔버스 요소 정의 -->
        <div class="canvas-container">
            <canvas id="gl-canvas" width="512" height="512">
                Oops ... your browser doesn't support the HTML5 canvas element
            </canvas>
        </div>
        <!-- 동작 버튼들 -->
        <div class="controls-container">
            <div class="sliders">
                <div>
                    torso angle -180 <input id="slider0" type="range" min="-180" max="180" step="10" value="0" />
                    180
                </div><br />
                <div>
                    head2 angle -180 <input id="slider10" type="range" min="-180" max="180" step="10" value="0" />
                    180
                </div><br />

                <div>
                    head1 angle -180 <input id="slider1" type="range" min="-180" max="180" step="10" value="0" />
                    180
                </div><br />

                <div>
                    left upper arm angle -180 <input id="slider2" type="range" min="-180" max="180" step="10"
                        value="0" />
                    180
                </div><br />
                <div>
                    left lower arm angle -180 <input id="slider3" type="range" min="-180" max="180" step="10"
                        value="0" />
                    180
                </div><br />
                <div>
                    right upper arm angle -180 <input id="slider4" type="range" min="-180" max="180" step="10"
                        value="0" />
                    180
                </div><br />
                <div>
                    right lower arm angle -180 <input id="slider5" type="range" min="-180" max="180" step="10"
                        value="0" />
                    180
                </div><br />
                <div>
                    left upper leg angle -180 <input id="slider6" type="range" min="-180" max="180" step="10"
                        value="0" />
                    180
                </div><br />
                <div>
                    left lower leg angle -180 <input id="slider7" type="range" min="-180" max="180" step="10"
                        value="0" />
                    180
                </div><br />
                <div>
                    right upper leg angle -180 <input id="slider8" type="range" min="-180" max="180" step="10"
                        value="0" />
                    180
                </div><br />

                <div>
                    right lower leg angle -180 <input id="slider9" type="range" min="-180" max="180" step="10"
                        value="0" />
                    180
                </div><br />
            </div>
        </div>
        <div class="controls-container">
            <div class="buttons">
                <button id="motioncapture_start">motioncapture start</button>
                <button id="motioncapture_stop">motioncapture stop</button>
                <button id="motioncapture_print">motioncapture print</button>
                <button id="motioncapture_play">motioncapture play</button>
                <button id="motioncapture_reset">motioncapture reset</button>
            </div>
        </div>
    </div>
</body>

</html>



<!-- 
    Actions
    <button id = "Button1">Catch</button>
    <button id = "Button2">Catch again</button>
    <button id = "Button3">Chummy</button>
    <button id = "Button6">Ignore</button>
    <button id = "Button7">Bored</button>
    <button id = "Button9">Fight</button>
    </div>
    
    프로세스 버튼들
    <div>
    Process
    <button id = "Button4">Rest</button>
    <button id = "Button5">Ruminate</button>
    <button id = "Button8">Angry</button>
    <button id = "Button10">Reset</button>
    </div>
    
    각도 조절 슬라이더
    <div>
    torso angle -180 <input id="slider0" type="range" min="-180" max="180" step="10" value="30" /> 180
    </div>

-->